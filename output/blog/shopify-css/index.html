<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>An oddity when working with JavaScript in Shopify themes The Approachable Geek</title>
    <link rel="stylesheet" type="text/css" href="/style.css" media="screen">

    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="nanoc 3.4.0"> 
  </head>
  <body>
    <nav id="tabs">
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/who">Who is The Approachable Geek</a></li>
        <li><a href="/what">What do I do</a></li>
        <li><a href="/hire">Hire me</a></li>
        <li><a href="/blog">Blog</a></li>
      </ul>
    </nav>

    <div id="main">
    <h1><a href="/blog/shopify-css/">An oddity when working with JavaScript in Shopify themes</a></h1>
 <p class="created_at">August 26, 2011</p>
 <p>Recently I’ve been doing quite a bit of work turning packs of HTML and CSS into <a href="http://www.shopify.com/">Shopify</a> themes.  Shopify is an amazing “Shop as a Service” website which makes it really easy to get your online shop up and running quickly letting Shopify handle all the hard bits (scaling, the CMS, payments etc).</p>

<p>What makes Shopify really impressive is you can write (or buy) themes for your shop which are extreamly customisable.  The functional logical of the templates if written in a language called Liquid.  At first <a href="http://www.liquidmarkup.org/">Liquid</a> looks clunky but it’s actually very powerful when used in combination with Shopify’s available data.</p>

<p>Shopify also let you add into the theme any other assets you might need, css, images, JavaScript etc. and this lead me to a frustrating problem which it seems worth writing up.  Looking back it’s screamingly obvious, but at the time it was far from it.</p>

<p>I was trying add a <a href="http://www.lokeshdhakar.com/projects/lightbox2/">lightbox</a> to a product, a simple enough problem normally.  Because the site was already using jquery I chose a jquery based <a href="http://leandrovieira.com/projects/jquery/lightbox/">lightbox</a> rather than introduce yet another set of JS libraries.  I added the JS files, the css and the image assets to the theme, bolted on the right selectors etc and it was up and running.  Clicking on the thumbnail caused a nice big image to be overlaid.</p>

<p>The problem was that the “Next” and “Close” buttons had broken images.  When you upload assets to Shopify it has no support for sub-directories in the assets directory so the paths of “../images/close_label.gif” needed modifying.  I tried “close_label.gif”, but that failed too, with the generated path being that of the page we were on, not the location of the JS file.  Very frustrating.</p>

<table>
  <tbody>
    <tr>
      <td>The problem was that I needed to get Liquid to render that image path so that it would take on the location as specified by Shopify.  JS assets however, unlike .liquid files, are not parsed, and so the {{ ‘close_label.gif’</td>
      <td>asset_url }} tag is never replaced.  I tried every dirty hack i could think of but nothing worked.</td>
    </tr>
  </tbody>
</table>

<p>Finally, after swapping out jquery-lightbox for slimbox it worked !  Why?  Because <a href="http://www.digitalia.be/software/slimbox2">Slimbox</a> uses CSS properly to style to pop-over rather than having the JS write the images into the DOM.  Proper separation of display and content wins the day.  CSS taken on the relative paths to the images based on it’s location, rather than the location of the page as the JS method caused.</p>

<p>The moral of the story, separation of presentation and content is important.</p>

    </div>

    <footer>
    <!-- something here-->
    </footer>
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-4150109-19']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>
